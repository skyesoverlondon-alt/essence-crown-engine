# Essence Crown – TCG Rules Engine

This repository contains the rules engine for **Essence Crown**, a custom trading card game built around:

- **Essence** – each Deity’s life total
- **KL (Kundalini Level)** – per-turn energy used to play cards
- **God Charges** – stored divine power gained when crossing the KL threshold

The goal of this repo is to implement a **fully rules-driven engine** that enforces:

- Turn structure
- Resource rules (Essence, KL, God Charges)
- Zones (Veiled Deck, Hand, Battlefield, Crypt, Null, etc.)
- Combat
- Win/loss conditions

The game rules and engine spec are documented in the `docs/` folder and are the **source of truth**. All code should follow those documents, not invent new rules.

---

## Project Layout

- `docs/rules-core.md`  
  Full prose rules for Essence Crown (player-facing rulebook style).

- `docs/engine-spec.md`  
  Codex-friendly, bullet-style **technical spec** that defines data structures and rules engine behavior.

- `docs/card-schema.md`  
  JSON/schema definition for how cards are represented in code.

- `docs/codex-tasks.md`  
  Prompt templates and task breakdown for asking Codex to implement the engine step-by-step.

- `src/`  
  Source code for the rules engine (to be implemented by Codex).

- `tests/`  
  Automated tests for the engine (to be implemented by Codex).

---

## How This Repo Is Used with Codex

1. You maintain rules in `docs/`.
2. Codex reads `docs/engine-spec.md` and `docs/card-schema.md` and generates / updates code in `src/` and `tests/`.
3. When asking Codex to do work, always remind it:
   - To follow `docs/engine-spec.md` as the rules source.
   - To keep all behavior compatible with `docs/rules-core.md`.

Example high-level task prompt:

> “You are building the Essence Crown engine. Read docs/engine-spec.md and docs/card-schema.md and implement the core game engine in TypeScript under src/, including GameState, Player, Card, Zones, and Turn structure, plus Jest tests in tests/. Follow the rules exactly.”

---

## Status

- ✅ Core rules written and exported as PDF and markdown.
- ✅ Engine spec drafted in `docs/engine-spec.md`.
- ⬜ Engine implementation in `src/` (to be generated by Codex).
- ⬜ Tests in `tests/` (to be generated by Codex).

The first step with Codex will be to **implement data models + turn structure** exactly as described in `docs/engine-spec.md`.
